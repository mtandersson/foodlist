# Cursor IDE Rules for FoodList Project

## Commit Messages

This project uses **Conventional Commits** specification. All commit messages MUST follow this format:

### Format

```
<type>(<scope>): <subject>

[optional body]

[optional footer]
```

### Types (REQUIRED)

- **feat**: New feature (minor version bump)
- **fix**: Bug fix (patch version bump)
- **docs**: Documentation only changes
- **style**: Code style/formatting (no code change)
- **refactor**: Code refactoring
- **perf**: Performance improvements
- **test**: Adding or updating tests
- **build**: Build system changes
- **ci**: CI/CD pipeline changes
- **chore**: Other changes that don't modify src/test files

### Scopes (OPTIONAL)

- `backend` - Go backend code
- `frontend` - Svelte frontend code
- `ui` - User interface components
- `api` - API endpoints/contracts
- `websocket` - WebSocket functionality
- `store` - State management (frontend or backend)
- `docker` - Docker/containerization
- `ci` - CI/CD workflows
- `docs` - Documentation files
- `tests` - Test files
- `e2e` - End-to-end tests

### Subject Rules

- Use imperative mood: "add" not "added" or "adds"
- Don't capitalize first letter
- No period at the end
- Maximum 72 characters
- Be specific and descriptive

### Breaking Changes

Add `!` after type/scope OR include `BREAKING CHANGE:` in footer:

```
feat(api)!: change response format
```

### Commit Message Examples

**Features:**

```
feat(backend): add user preferences endpoint
feat(ui): implement dark mode toggle
feat(websocket): add connection pooling
feat(store): add optimistic updates
```

**Bug Fixes:**

```
fix(auth): resolve token expiration issue
fix(ui): correct button alignment in modal
fix(websocket): prevent connection leak
fix(store): handle race condition in state update
```

**Documentation:**

```
docs(readme): add installation instructions
docs(api): document new endpoints
docs(contributing): update commit guidelines
```

**Refactoring:**

```
refactor(store): simplify state management
refactor(backend): extract event handling logic
refactor(ui): componentize todo list
```

**Performance:**

```
perf(backend): optimize event store queries
perf(ui): implement virtual scrolling
perf(websocket): reduce message overhead
```

**Tests:**

```
test(backend): add integration tests for auth
test(ui): add TodoItem component tests
test(e2e): add category selection tests
```

**CI/CD:**

```
ci: add GitHub Actions workflows
ci(release): update semantic-release config
ci(build): optimize Docker build cache
```

**Breaking Changes:**

```
feat(api)!: change event structure to include timestamps

BREAKING CHANGE: All events now require a timestamp field.
Clients must be updated to handle the new structure.
```

### When Suggesting Commits

1. Analyze the changed files to determine appropriate type and scope
2. Generate a clear, specific subject line
3. If changes are complex, include a body explaining WHY
4. If changes break compatibility, mark as breaking change
5. Reference related issues in footer (e.g., "Closes #123")

### Validation

All commits are validated by semantic-release. Invalid commits will cause CI to fail or releases to be skipped.

## Project Context

- **Backend**: Go 1.25.5, event-sourced architecture, WebSocket server
- **Frontend**: Svelte + TypeScript, Vite, reactive state management
- **Architecture**: Real-time event sourcing with JSONL storage
- **CI/CD**: GitHub Actions with semantic versioning
- **Versioning**: Semantic versioning (0.0.1 starting version)

## File Organization

- `/backend` - Go backend code
- `/frontend` - Svelte frontend code
- `/e2e` - Cypress end-to-end tests
- `/schema` - Event schema definitions
- `/.github` - GitHub Actions workflows and templates

## When in Doubt

Refer to:

- `CONTRIBUTING.md` - Full conventional commits guide
- `docs/guides/COMMIT_QUICK_REFERENCE.md` - Quick reference
- `docs/setup/CI_CD_GUIDE.md` - CI/CD pipeline documentation
